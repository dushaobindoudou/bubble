<!DOCTYPE html>
<html>
<head>
    <title>Debug Contract Functions</title>
    <script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <h1>Debug BubbleSkinNFT Contract</h1>
    <div id="results"></div>
    <button onclick="testContract()">Test Contract</button>
    <button onclick="clearResults()">Clear</button>

    <script>
        const CONTRACT_ADDRESS = "0x6Cde3abE9ACC5028330bd301415e59877D0A5Bdd";
        const RPC_URL = "https://testnet-rpc.monad.xyz";
        
        // Import the actual ABI from the project
        const BUBBLE_SKIN_NFT_ABI = [
            {
                "inputs": [],
                "name": "getTotalTemplates",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "getTotalSupply",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "name",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "symbol",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        function log(message) {
            const results = document.getElementById('results');
            results.innerHTML += `<p>${new Date().toLocaleTimeString()}: ${message}</p>`;
            console.log(message);
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        async function testContract() {
            log('🔍 Starting contract test...');
            
            try {
                // Connect to provider
                const provider = new ethers.providers.JsonRpcProvider(RPC_URL);
                log('✅ Connected to provider');
                
                // Create contract instance
                const contract = new ethers.Contract(CONTRACT_ADDRESS, BUBBLE_SKIN_NFT_ABI, provider);
                log('✅ Contract instance created');
                
                // Test basic functions
                try {
                    const name = await contract.name();
                    log(`✅ Name: ${name}`);
                } catch (error) {
                    log(`❌ Name failed: ${error.message}`);
                }
                
                try {
                    const symbol = await contract.symbol();
                    log(`✅ Symbol: ${symbol}`);
                } catch (error) {
                    log(`❌ Symbol failed: ${error.message}`);
                }
                
                // Test getTotalTemplates
                try {
                    log('🔍 Calling getTotalTemplates...');
                    const totalTemplates = await contract.getTotalTemplates();
                    log(`✅ getTotalTemplates: ${totalTemplates.toString()}`);
                } catch (error) {
                    log(`❌ getTotalTemplates failed: ${error.message}`);
                    log(`❌ Error details: ${JSON.stringify(error, null, 2)}`);
                }
                
                // Test getTotalSupply
                try {
                    log('🔍 Calling getTotalSupply...');
                    const totalSupply = await contract.getTotalSupply();
                    log(`✅ getTotalSupply: ${totalSupply.toString()}`);
                } catch (error) {
                    log(`❌ getTotalSupply failed: ${error.message}`);
                }
                
                // Test if getTemplateCount exists (it shouldn't)
                try {
                    log('🔍 Testing if getTemplateCount exists (should fail)...');
                    const templateCount = await contract.getTemplateCount();
                    log(`⚠️ getTemplateCount unexpectedly succeeded: ${templateCount.toString()}`);
                } catch (error) {
                    log(`✅ getTemplateCount correctly failed (function does not exist): ${error.message}`);
                }
                
                log('🎉 Contract test completed');
                
            } catch (error) {
                log(`❌ Test failed: ${error.message}`);
                log(`❌ Error details: ${JSON.stringify(error, null, 2)}`);
            }
        }
        
        // Auto-run test when page loads
        window.onload = () => {
            log('📄 Page loaded, ready to test contract');
        };
    </script>
</body>
</html>
